<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="cFRWCQM0wv5j9A7i1KEyEveQK_TuNXQiO9yLsU6jXxc" />










  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="events,js,web," />





  <link rel="alternate" href="/atom.xml" title="Something Binary" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="A Brief Introduction to Browser Events Model">
<meta property="og:type" content="article">
<meta property="og:title" content="Browser Events Model">
<meta property="og:url" content="http://fredxue.com/2016/03/10/Event/index.html">
<meta property="og:site_name" content="Something Binary">
<meta property="og:description" content="A Brief Introduction to Browser Events Model">
<meta property="og:updated_time" content="2016-03-10T13:30:49.930Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Browser Events Model">
<meta name="twitter:description" content="A Brief Introduction to Browser Events Model">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> Browser Events Model | Something Binary </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-74266266-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?d9ef124ce3d49fd8f12716ecfd576558";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Something Binary</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Here Today. Gone Tommorrow.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            About
          </a>
        </li>
      

      
      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Browser Events Model
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-03-10T13:18:44+00:00" content="2016-03-10">
              2016-03-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/binary/" itemprop="url" rel="index">
                    <span itemprop="name">binary</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/10/Event/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/03/10/Event/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><blockquote class="blockquote-center">A Brief Introduction to Browser Events Model</blockquote><br><a id="more"></a></p>
<h2 id="Events-type"><a href="#Events-type" class="headerlink" title="Events type"></a>Events type</h2><ul>
<li>Common/W3C events: Mouse, Keyboard, HTML frame, HTML form</li>
<li>Touch events</li>
<li>Pointer Events<br>…</li>
</ul>
<h2 id="Event-Flow"><a href="#Event-Flow" class="headerlink" title="Event Flow"></a>Event Flow</h2><p>Consider the situation when there are 2 elements nested together. Both have event handlers registered on the same event type, say “click”. When the user clicks on the inner element, there are two possible ways to handle it:</p>
<ul>
<li>Trigger the elements from outer to inner (event capturing). This model is implemented in Netscape Navigator.</li>
<li>Trigger the elements from inner to outer (event bubbling). This model is implemented in Internet Explorer and other browsers.[13]</li>
</ul>
<p>W3C takes a middle position in this struggle. Events are first captured until it reaches the target element, and then bubbled up. During the event flow, an event can be responded to at any element in the path (an observer) in either phase by causing an action, and/or by stopping the event (with method event.stopPropagation() for W3C-conforming browsers and command event.cancelBubble = true for Internet Explorer), and/or by cancelling the default action for the event.</p>
<h2 id="Event-Object"><a href="#Event-Object" class="headerlink" title="Event Object"></a>Event Object</h2><p>The Event object provides a lot of information about a particular event, including information about target element, key pressed, mouse button pressed, mouse position, etc. Unfortunately, there are very serious browser incompatibilities in this area.</p>
<h2 id="Event-handling-models"><a href="#Event-handling-models" class="headerlink" title="Event handling models"></a>Event handling models</h2><p>Events and event handling become central to web programming with the addition of the language to browsers, accompanying a switch in the rendering architecture of browsers from fetch and load page rendering to event driven, reflow based, page rendering. Initially, browsers wait, until they receive all of the resources associated with a page, to parse, process, draw, and present the page to the user. The displayed page remains unchanged until the browser requests a new page. With the change to dynamic page rendering, browsers loop continuously between processing, drawing, presenting content, and waiting for some new event trigger. Event triggers include the completion of the loading of a resource on the network e.g., downloads an image that can now be drawn on the screen, the completion of parsing a resource by the browser e.g., processes the HTML content of a page, the interaction of a user with the contents of the page e.g., clicks a button. </p>
<h3 id="Design-Pattern"><a href="#Design-Pattern" class="headerlink" title="Design Pattern"></a>Design Pattern</h3><p>The event system, at its core, is simply a programming design pattern. The pattern starts with an agreement over a kind of event and:</p>
<ul>
<li>the name String used for the event,</li>
<li>the type of the data structure used to represent the key properties of that event, and</li>
<li>the JavaScript object which will ‘emit’ that event.</li>
</ul>
<p>The pattern is implemented by</p>
<ul>
<li>defining a JavaScript function which takes as an argument the data structure which was agreed upon, and</li>
<li>registering the function using the name String with the object which will emit the event.</li>
</ul>
<h3 id="DOM-Level-0"><a href="#DOM-Level-0" class="headerlink" title="DOM Level 0"></a>DOM Level 0</h3><ul>
<li><p>inline model:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;a href=&#34;http://www.example.com&#34; onclick=&#34;triggerAlert(&#39;Joe&#39;); return false;&#34;&#62;Joe&#60;/a&#62;</span><br></pre></td></tr></table></figure>
</li>
<li><p>traditional model:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var triggerAlert = function () &#123;&#10;&#9;window.alert(&#34;Hey Joe&#34;);&#10;&#125;;&#10;&#10;// Assign an event handler&#10;document.onclick = triggerAlert;&#10;&#10;// Assign another event handler&#10;window.onload = triggerAlert;&#10;&#10;// Remove the event handler that was just assigned&#10;window.onload = null;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="DOM-Level-2"><a href="#DOM-Level-2" class="headerlink" title="DOM Level 2"></a>DOM Level 2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//Allows the registration of event listeners on the event target.&#10;addEventListener(DOMString type, EventListener listener, boolean useCapture)&#123;&#125;;&#10;&#10;//Allows the removal of event listeners from the event target.&#10;removeEventListener(DOMString type, EventListener listener, boolean useCapture)&#123;&#125;;&#10;&#10;//Allows sending the event to the subscribed event listeners.&#10;disPatchEvent(Event evt)&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>Some useful things to know :</p>
<ul>
<li>To prevent an event from bubbling, developers must call the “stopPropagation()” method of the event object.</li>
<li>To prevent the default action of the event to be called, developers must call the “preventDefault” method of the event object.</li>
</ul>
<p><strong><em>The main difference from the traditional model is that multiple event handlers can be registered for the same event.</em></strong>  The useCapture option can also be used to specify that the handler should be called in the capture phase instead of the bubbling phase. This model is supported by Mozilla, Opera, Safari, Chrome and Konqueror.</p>
<blockquote>
<p>IE soecific model omitted in this article. You can see <a href="https://en.wikipedia.org/wiki/DOM_events#DOM_Level_0" target="_blank" rel="external">here</a></p>
</blockquote>
<h2 id="Create-Custom-Event"><a href="#Create-Custom-Event" class="headerlink" title="Create Custom Event"></a>Create Custom Event</h2><ol>
<li><h3 id="Step-1-Create-a-new-Event-object"><a href="#Step-1-Create-a-new-Event-object" class="headerlink" title="Step 1: Create a new Event object"></a>Step 1: Create a new Event object</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var event = new CustomEvent(&#10;&#9;&#34;newMessage&#34;, &#10;&#9;&#123;&#10;&#9;&#9;detail: &#123;&#10;&#9;&#9;&#9;message: &#34;Hello World!&#34;,&#10;&#9;&#9;&#9;time: new Date(),&#10;&#9;&#9;&#125;,&#10;&#9;&#9;bubbles: true,&#10;&#9;&#9;cancelable: true&#10;&#9;&#125;&#10;);</span><br></pre></td></tr></table></figure>
<p> The second parameter is an object with three properties:</p>
<ul>
<li>detail: a child object providing custom information about the event. In this example, we’ve added a message and time.</li>
<li>bubbles: if true, events will bubble to ancestors of the element which fired the event.</li>
<li>cancelable: if true, events can be canceled using the event object’s stopPropagation() method.</li>
</ul>
</li>
<li><h3 id="Step-2-Dispatch-this-event-on-a-specific-element"><a href="#Step-2-Dispatch-this-event-on-a-specific-element" class="headerlink" title="Step 2: Dispatch this event on a specific element"></a>Step 2: Dispatch this event on a specific element</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&#34;msgbox&#34;).dispatchEvent(event);</span><br></pre></td></tr></table></figure>
</li>
<li><h3 id="Step-3-Any-number-of-handlers-can-subscribe-to-this-event"><a href="#Step-3-Any-number-of-handlers-can-subscribe-to-this-event" class="headerlink" title="Step 3: Any number of handlers can subscribe to this event"></a>Step 3: Any number of handlers can subscribe to this event</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.addEventListener(&#34;newMessage&#34;, newMessageHandler, false);</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/events/" rel="tag">#events</a>
          
            <a href="/tags/js/" rel="tag">#js</a>
          
            <a href="/tags/web/" rel="tag">#web</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/03/07/reading2015/" rel="next" title="2015下半年读书总结">
                <i class="fa fa-chevron-left"></i> 2015下半年读书总结
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Fred Xue" />
          <p class="site-author-name" itemprop="name">Fred Xue</p>
          <p class="site-description motion-element" itemprop="description">Here Today. Gone Tommorrow.</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">2</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/FredXue" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/fredxue0110" target="_blank">
                  
                    <i class="fa fa-linkedin"></i> Linkedin
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/fredxue0110" target="_blank">
                  
                    <i class="fa fa-twitter"></i> Twitter
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/needalcohol" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Wait. Where's your husband</p>
            
              <span class="links-of-author-item">
                <a href="http://slowlysuck.com/" target="_blank">good.kid.mAAd.city</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://nemo733.info/" target="_blank">Nemo</a>
              </span>
            
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator">
            <i class="fa fa-angle-double-up"></i>
          </div>
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Events-type"><span class="nav-number">1.</span> <span class="nav-text">Events type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event-Flow"><span class="nav-number">2.</span> <span class="nav-text">Event Flow</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event-Object"><span class="nav-number">3.</span> <span class="nav-text">Event Object</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event-handling-models"><span class="nav-number">4.</span> <span class="nav-text">Event handling models</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Design-Pattern"><span class="nav-number">4.1.</span> <span class="nav-text">Design Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DOM-Level-0"><span class="nav-number">4.2.</span> <span class="nav-text">DOM Level 0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DOM-Level-2"><span class="nav-number">4.3.</span> <span class="nav-text">DOM Level 2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Create-Custom-Event"><span class="nav-number">5.</span> <span class="nav-text">Create Custom Event</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-1-Create-a-new-Event-object"><span class="nav-number">5.1.</span> <span class="nav-text">Step 1: Create a new Event object</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-2-Dispatch-this-event-on-a-specific-element"><span class="nav-number">5.2.</span> <span class="nav-text">Step 2: Dispatch this event on a specific element</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-3-Any-number-of-handlers-can-subscribe-to-this-event"><span class="nav-number">5.3.</span> <span class="nav-text">Step 3: Any number of handlers can subscribe to this event</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator">
            <i class="fa fa-angle-double-down"></i>
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Fred Xue</span>
</div>




      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  
<script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>

<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 1 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = NexT.utils.escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    NexT.motion.middleWares.sidebar = function () {
      var $tocContent = $('.post-toc-content');

      if (CONFIG.sidebar.display === 'post' || CONFIG.sidebar.display === 'always') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          NexT.utils.displaySidebar();
        }
      }
    };
  });
</script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'fredxue';
      var disqus_identifier = '2016/03/10/Event/';
      var disqus_title = 'Browser Events Model';
      var disqus_url = 'http://fredxue.com/2016/03/10/Event/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  



  
  

  
  


</body>
</html>
