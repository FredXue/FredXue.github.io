<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="Browser Events Model"/>




  <meta name="keywords" content="events,js,web," />





  <link rel="alternative" href="/atom.xml" title="Xiaoyu Xue's Blog" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1" />



<link rel="canonical" href="http://fredxue.github.io/2016/03/10/Event/"/>


<meta name="description" content="A Brief Introduction to Browser Events Model">
<meta property="og:type" content="article">
<meta property="og:title" content="Browser Events Model">
<meta property="og:url" content="http://fredxue.github.io/2016/03/10/Event/index.html">
<meta property="og:site_name" content="Xiaoyu Xue's Blog">
<meta property="og:description" content="A Brief Introduction to Browser Events Model">
<meta property="og:updated_time" content="2016-03-10T13:30:49.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Browser Events Model">
<meta name="twitter:description" content="A Brief Introduction to Browser Events Model">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> Browser Events Model - Xiaoyu Xue's Blog </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">Xiaoyu Xue's Blog</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Browser Events Model
        
      </h1>

      <time class="post-time">
          Mar 10 2016
      </time>
    </header>



    
            <div class="post-content">
            <p><blockquote class="blockquote-center">A Brief Introduction to Browser Events Model</blockquote><br><a id="more"></a></p>
<h2 id="Events-type"><a href="#Events-type" class="headerlink" title="Events type"></a>Events type</h2><ul>
<li>Common/W3C events: Mouse, Keyboard, HTML frame, HTML form</li>
<li>Touch events</li>
<li>Pointer Events<br>…</li>
</ul>
<h2 id="Event-Flow"><a href="#Event-Flow" class="headerlink" title="Event Flow"></a>Event Flow</h2><p>Consider the situation when there are 2 elements nested together. Both have event handlers registered on the same event type, say “click”. When the user clicks on the inner element, there are two possible ways to handle it:</p>
<ul>
<li>Trigger the elements from outer to inner (event capturing). This model is implemented in Netscape Navigator.</li>
<li>Trigger the elements from inner to outer (event bubbling). This model is implemented in Internet Explorer and other browsers.[13]</li>
</ul>
<p>W3C takes a middle position in this struggle. Events are first captured until it reaches the target element, and then bubbled up. During the event flow, an event can be responded to at any element in the path (an observer) in either phase by causing an action, and/or by stopping the event (with method event.stopPropagation() for W3C-conforming browsers and command event.cancelBubble = true for Internet Explorer), and/or by cancelling the default action for the event.</p>
<h2 id="Event-Object"><a href="#Event-Object" class="headerlink" title="Event Object"></a>Event Object</h2><p>The Event object provides a lot of information about a particular event, including information about target element, key pressed, mouse button pressed, mouse position, etc. Unfortunately, there are very serious browser incompatibilities in this area.</p>
<h2 id="Event-handling-models"><a href="#Event-handling-models" class="headerlink" title="Event handling models"></a>Event handling models</h2><p>Events and event handling become central to web programming with the addition of the language to browsers, accompanying a switch in the rendering architecture of browsers from fetch and load page rendering to event driven, reflow based, page rendering. Initially, browsers wait, until they receive all of the resources associated with a page, to parse, process, draw, and present the page to the user. The displayed page remains unchanged until the browser requests a new page. With the change to dynamic page rendering, browsers loop continuously between processing, drawing, presenting content, and waiting for some new event trigger. Event triggers include the completion of the loading of a resource on the network e.g., downloads an image that can now be drawn on the screen, the completion of parsing a resource by the browser e.g., processes the HTML content of a page, the interaction of a user with the contents of the page e.g., clicks a button. </p>
<h3 id="Design-Pattern"><a href="#Design-Pattern" class="headerlink" title="Design Pattern"></a>Design Pattern</h3><p>The event system, at its core, is simply a programming design pattern. The pattern starts with an agreement over a kind of event and:</p>
<ul>
<li>the name String used for the event,</li>
<li>the type of the data structure used to represent the key properties of that event, and</li>
<li>the JavaScript object which will ‘emit’ that event.</li>
</ul>
<p>The pattern is implemented by</p>
<ul>
<li>defining a JavaScript function which takes as an argument the data structure which was agreed upon, and</li>
<li>registering the function using the name String with the object which will emit the event.</li>
</ul>
<h3 id="DOM-Level-0"><a href="#DOM-Level-0" class="headerlink" title="DOM Level 0"></a>DOM Level 0</h3><ul>
<li><p>inline model:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;a href=&#34;http://www.example.com&#34; onclick=&#34;triggerAlert(&#39;Joe&#39;); return false;&#34;&#62;Joe&#60;/a&#62;</span><br></pre></td></tr></table></figure>
</li>
<li><p>traditional model:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var triggerAlert = function () &#123;&#10;&#9;window.alert(&#34;Hey Joe&#34;);&#10;&#125;;&#10;&#10;// Assign an event handler&#10;document.onclick = triggerAlert;&#10;&#10;// Assign another event handler&#10;window.onload = triggerAlert;&#10;&#10;// Remove the event handler that was just assigned&#10;window.onload = null;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="DOM-Level-2"><a href="#DOM-Level-2" class="headerlink" title="DOM Level 2"></a>DOM Level 2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//Allows the registration of event listeners on the event target.&#10;addEventListener(DOMString type, EventListener listener, boolean useCapture)&#123;&#125;;&#10;&#10;//Allows the removal of event listeners from the event target.&#10;removeEventListener(DOMString type, EventListener listener, boolean useCapture)&#123;&#125;;&#10;&#10;//Allows sending the event to the subscribed event listeners.&#10;disPatchEvent(Event evt)&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>Some useful things to know :</p>
<ul>
<li>To prevent an event from bubbling, developers must call the “stopPropagation()” method of the event object.</li>
<li>To prevent the default action of the event to be called, developers must call the “preventDefault” method of the event object.</li>
</ul>
<p><strong><em>The main difference from the traditional model is that multiple event handlers can be registered for the same event.</em></strong>  The useCapture option can also be used to specify that the handler should be called in the capture phase instead of the bubbling phase. This model is supported by Mozilla, Opera, Safari, Chrome and Konqueror.</p>
<blockquote>
<p>IE soecific model omitted in this article. You can see <a href="https://en.wikipedia.org/wiki/DOM_events#DOM_Level_0" target="_blank" rel="external">here</a></p>
</blockquote>
<h2 id="Create-Custom-Event"><a href="#Create-Custom-Event" class="headerlink" title="Create Custom Event"></a>Create Custom Event</h2><ol>
<li><h3 id="Step-1-Create-a-new-Event-object"><a href="#Step-1-Create-a-new-Event-object" class="headerlink" title="Step 1: Create a new Event object"></a>Step 1: Create a new Event object</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var event = new CustomEvent(&#10;&#9;&#34;newMessage&#34;, &#10;&#9;&#123;&#10;&#9;&#9;detail: &#123;&#10;&#9;&#9;&#9;message: &#34;Hello World!&#34;,&#10;&#9;&#9;&#9;time: new Date(),&#10;&#9;&#9;&#125;,&#10;&#9;&#9;bubbles: true,&#10;&#9;&#9;cancelable: true&#10;&#9;&#125;&#10;);</span><br></pre></td></tr></table></figure>
<p> The second parameter is an object with three properties:</p>
<ul>
<li>detail: a child object providing custom information about the event. In this example, we’ve added a message and time.</li>
<li>bubbles: if true, events will bubble to ancestors of the element which fired the event.</li>
<li>cancelable: if true, events can be canceled using the event object’s stopPropagation() method.</li>
</ul>
</li>
<li><h3 id="Step-2-Dispatch-this-event-on-a-specific-element"><a href="#Step-2-Dispatch-this-event-on-a-specific-element" class="headerlink" title="Step 2: Dispatch this event on a specific element"></a>Step 2: Dispatch this event on a specific element</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&#34;msgbox&#34;).dispatchEvent(event);</span><br></pre></td></tr></table></figure>
</li>
<li><h3 id="Step-3-Any-number-of-handlers-can-subscribe-to-this-event"><a href="#Step-3-Any-number-of-handlers-can-subscribe-to-this-event" class="headerlink" title="Step 3: Any number of handlers can subscribe to this event"></a>Step 3: Any number of handlers can subscribe to this event</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.addEventListener(&#34;newMessage&#34;, newMessageHandler, false);</span><br></pre></td></tr></table></figure></li>
</ol>

            </div>
          

    
      <footer class="post-footer">
        <div class="post-tags">
          
            <a href="/tags/events/">events</a>
          
            <a href="/tags/js/">js</a>
          
            <a href="/tags/web/">web</a>
          
        </div>

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2016/07/22/graduate/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">graduate</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2016/03/07/reading2015/">
        <span class="next-text nav-default">2015下半年读书总结</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
    <div style="text-align:center;">
        <button class="btn" id="load-disqus" onclick="disqus.load();">加载 Disqus 评论</button>
    </div>
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2012 -
    
    2017
    <span class="footer-author">Xiaoyu Xue.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/henryhuang/hexo-theme-polarbearsimple">Polar Bear Simple</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    

<script type="text/javascript">
  var disqus_shortname = 'fredxue';
  var disqus_identifier = '2016/03/10/Event/';

  var disqus_title = "Browser Events Model";


  var disqus = {
    load : function disqus(){
        if(typeof DISQUS !== 'object') {
          (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
          }());
          $('#load-disqus').remove(); ///加载后移除按钮
        }
    }
  }

  
    var disqus_config = function () {
        this.page.url = disqus_url;
        this.page.identifier = disqus_identifier;
        this.page.title = disqus_title;
    };
  

</script>


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
